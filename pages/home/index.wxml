<!--pages/home/index.wxml-->
<view class="home-container">
  <!-- é¡¶éƒ¨é—®å€™ -->
  <view class="header">
    <view class="greeting">
      <text class="greeting-text">Hi, å°å­¦éœ¸! ğŸ‘‹</text>
      <text class="greeting-sub">ä»Šå¤©ä¹Ÿè¦åŠ æ²¹å­¦å•è¯å“¦~</text>
    </view>
    <image class="avatar" src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" mode="aspectFill"></image>
  </view>

  <!-- è¿ç»­æ‰“å¡ -->
  <view class="streak-banner" wx:if="{{streak > 0}}">
    <text class="streak-icon">ğŸ”¥</text>
    <text class="streak-text">è¿ç»­å­¦ä¹ </text>
    <text class="streak-count">{{streak}}</text>
    <text class="streak-text">å¤©</text>
  </view>

  <!-- ä»Šæ—¥è¿›åº¦å¡ç‰‡ -->
  <view class="progress-card">
    <view class="progress-content">
      <!-- ç¯å½¢è¿›åº¦ -->
      <view class="ring-progress">
        <canvas canvas-id="progressRing" class="ring-bg"></canvas>
        <view class="ring-center">
          <text class="ring-value">{{progress.todayLearned}}</text>
          <text class="ring-label">/ {{dailyGoal}}</text>
        </view>
      </view>
      
      <view class="progress-details">
        <text class="progress-title">ä»Šæ—¥å­¦ä¹ è¿›åº¦</text>
        <view class="progress-stats">
          <view class="stat-item">
            <text class="stat-icon">ğŸ“š</text>
            <text class="stat-text">å·²å­¦ {{progress.todayLearned}} ä¸ª</text>
          </view>
          <view class="stat-item">
            <text class="stat-icon">ğŸ”„</text>
            <text class="stat-text">å¤ä¹  {{progress.todayReviewed}} ä¸ª</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œ -->
  <view class="quick-actions">
    <view class="action-card" bindtap="startLearning">
      <text class="action-icon">ğŸ“–</text>
      <text class="action-title">å¼€å§‹å­¦ä¹ </text>
      <text class="action-desc">å­¦ä¹ æ–°å•è¯</text>
    </view>

    <view class="action-card" bindtap="quickReview">
      <text class="action-icon">ğŸ”„</text>
      <text class="action-title">å¿«é€Ÿå¤ä¹ </text>
      <text class="action-desc">å¾…å¤ä¹  {{reviewCount}} ä¸ª</text>
      <view class="badge" wx:if="{{reviewCount > 0}}">{{reviewCount > 99 ? '99+' : reviewCount}}</view>
    </view>

    <view class="action-card" bindtap="randomTest">
      <text class="action-icon">ğŸ¯</text>
      <text class="action-title">éšæœºæµ‹è¯•</text>
      <text class="action-desc">æ£€éªŒæˆæœ</text>
    </view>

    <view class="action-card" bindtap="goSearch">
      <text class="action-icon">ğŸ”</text>
      <text class="action-title">æœç´¢å•è¯</text>
      <text class="action-desc">å¿«é€ŸæŸ¥æ‰¾</text>
    </view>
  </view>

  <!-- å¹´çº§é€‰æ‹© -->
  <view class="section-header">
    <text class="section-title">é€‰æ‹©å¹´çº§</text>
  </view>
  
  <view class="grade-list">
    <view class="grade-card" wx:for="{{grades}}" wx:key="grade" bindtap="selectGrade" data-grade="{{item.grade}}">
      <view class="grade-icon g{{item.grade}}">
        <text>{{item.grade}}</text>
      </view>
      <view class="grade-info">
        <text class="grade-name">{{item.name}}</text>
        <text class="grade-count">å…± {{item.count}} ä¸ªå•è¯</text>
      </view>
      <text class="grade-arrow">â€º</text>
    </view>
  </view>
</view>
